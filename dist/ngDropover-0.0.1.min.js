!function(a,b){"use strict";angular.module("ngDropover",[]).run(function(a,b){a.on("click",function(a){a.fromDocument=!0,b.$emit("ngDropover.closeAll",a)})}).constant("ngDropoverConfig",{horizontalOffset:0,verticalOffset:0,closeOthersOnOpen:!0,trigger:"",triggerEvent:"click",position:"bottom-left",closeOnClickOff:!0,classOnly:!1,group:""}).factory("triggerHelper",function(){var a={mouseenter:"mouseleave",click:"click",focus:"blur"};return{getTriggers:function(b){var c=b,d=a[c]||c;return"hover"===b?{show:"mouseenter",hide:"mouseleave"}:{show:c,hide:d}}}}).directive("ngDropover",function(a,c,d,e,f,g){return{restrict:"A",replace:!0,scope:{target:"@ngDropover",ngDropoverOptions:"@ngDropoverOptions"},link:function(e,h,i){function j(){e.config=angular.extend({},a,e.$eval(e.ngDropoverOptions)),l(),t={toggle:function(a){a.ngDropoverId||(a.ngDropoverId=e.ngDropoverId,e.toggle(e.ngDropoverId))},open:function(a){a.ngDropoverId=e.ngDropoverId,e.isOpen||e.open(e.ngDropoverId)},close:function(a){a.ngDropoverId=e.ngDropoverId,e.isOpen&&e.close(e.ngDropoverId)},markEvent:function(a){a.ngDropoverId=e.ngDropoverId}},e.$watch("ngDropoverOptions",function(){n(),e.config=angular.extend({},a,e.$eval(e.ngDropoverOptions)),m(),k()},!0),m(),k(),r.on("click",t.markEvent)}function k(){e.config.classOnly===!0?(u=v=function(){},o()):(u=function(){r.css("visibility","visible")},v=function(){r.css("visibility","hidden")},r.css("visibility","hidden"))}function l(){r=p(),h.addClass(e.config.wrapperClass),r.css({position:"absolute"}).addClass("ng-dropover-contents")}function m(){s=[h];var a=g.getTriggers(e.config.triggerEvent);""!==e.config.trigger&&(s=b.querySelectorAll(e.config.trigger));for(var c=0;c<s.length;c++){var d=angular.element(s[c]);d.addClass("ng-dropover-trigger"),a.show===a.hide?d.on(a.show,t.toggle):(d.on(a.show,t.open),d.on(a.hide,t.close))}}function n(){for(var a=g.getTriggers(e.config.triggerEvent),b=0;b<s.length;b++){var c=angular.element(s[b]);a.show===a.hide?c.off(a.show,t.toggle):(c.off(a.show,t.open),c.off(a.hide,t.close))}}function o(){var a=d.positionElements(h,r,e.config.position,!1),b=parseInt(e.config.horizontalOffset,10)||0,c=parseInt(e.config.verticalOffset,10)||0;r.css("left",a.left+b+"px"),r.css("top",a.top+c+"px")}function p(){var a;return h[0].querySelector("[ng-dropover-contents]")?a=angular.element(h[0].querySelector("[ng-dropover-contents]")).addClass(e.config.group):(a=angular.element("<div class='ng-dropover-empty'>Oops, you forgot to specify what goes in the dropdown</div>").addClass(e.config.group),h.append(a),a)}function q(){c.$broadcast("ngDropover.closing",{id:e.ngDropoverId,element:r[0],group:e.config.group}),v(),h.removeClass("ng-dropover-open"),e.isOpen=!1,angular.element(f).unbind("resize",o)}var r,s,t,u,v;j(),e.open=function(a){a!==e.ngDropoverId||e.isOpen||(o(),c.$broadcast("ngDropover.opening",{id:e.ngDropoverId,element:r[0],group:e.config.group}),u(),h.addClass("ng-dropover-open"),angular.element(f).bind("resize",o),e.isOpen=!0)},e.close=function(a){a===e.ngDropoverId&&e.isOpen&&q()},e.toggle=function(a){e.isOpen?e.close(a):e.open(a)},e.closeAll=function(){e.isOpen&&q()},e.$on("$destroy",function(){n(),angular.element(f).unbind("resize",o),r.off("click",t.markEvent)})},controller:["$scope","$element","$attrs",function(a,b,d){a.isOpen=!1,a.ngDropoverId=a.target||a.$id,a.openListener=c.$on("ngDropover.open",function(b,c){a.open(c.ngDropoverId)}),a.closeListener=c.$on("ngDropover.close",function(b,c){a.close(c.ngDropoverId)}),a.closeAllListener=c.$on("ngDropover.closeAll",function(b,c){c.ngDropoverId===a.ngDropoverId||(a.config.closeOnClickOff||!c.fromDocument)&&a.closeAll()}),a.toggleListener=c.$on("ngDropover.toggle",function(b,c){a.isOpen?a.close(c.ngDropoverId):a.open(c.ngDropoverId)}),a.$on("$destroy",function(){a.openListener(),a.openListener=null,a.closeListener(),a.closeListener=null,a.closeAllListener(),a.closeAllListener=null,a.toggleListener(),scope.toggleListener=null})}]}}).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!==a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return"right"===k?e.left+(e.width-f):e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}])}(window,document);